# 概要
このプロジェクトは、指定したブランドの商品情報を取得し、その情報をもとにTwitterに自動的にツイートするためのツール。ツイートは、商品名や価格、URLといった情報を含む内容で、指定されたブランドやアイテムのタグを付与して投稿される。

# 必要な環境
## Python
Python 3.9

## Pythonパッケージ
requirements.txt参照

## 設定ファイル
src/config.py:
- DAILY_FREE_TWEET_LIMIT: 1日のツイート上限数
- PATH_OUTPUT_DIR: ツイート用テキストファイルの保存先ディレクトリ
- REQ_PARAMS: 商品情報取得に必要なAPIリクエストパラメータ
- TwitterAPI: Twitter APIに接続するための認証情報

# 機能
1. 商品情報の取得: brand_item_model.csv ファイルからブランド、商品名、モデル情報を読み取り、それに基づいて楽天市場APIを用いて商品情報を取得。
2. ツイート用テキストの生成: 取得した商品情報を元に、ツイート用のテキストを作成し、指定されたディレクトリに保存。
3. 自動投稿: 作成したテキストファイルを読み込み、Twitter APIを用いて自動的にツイート。
4. ログ記録: 処理の過程で発生したログは、log.txt に保存され、エラーが発生した場合はその内容も記録。
5. 次のアイテムの選択: ツイート後、処理したアイテムのIDを保存し、次回実行時には次のアイテムを選択して処理を行う。

# 使用方法
## Lambdaハンドラの実行
このツールはAWS Lambdaなどで実行することを想定、lambda_handler 関数を呼び出すことで、商品情報の取得からツイートまで一連の処理を実行する。

## 関数
### lambda_handler
- この関数は、Lambdaイベントを受け取って処理を開始するエントリーポイント。
- 処理内容としては、商品情報の取得、ツイート用テキストの生成、ツイート投稿、次回実行するためのIDの保存を行う。

### load_brand_item_model
- brand_item_model.csv からブランド、商品名、モデル情報を読み込む関数。

### fetch_products
- 指定したブランド名と商品名を使って、楽天APIを呼び出して商品情報を取得。

### save_tweet_texts
- 取得した商品情報を基に、ツイート用のテキストファイルを指定されたディレクトリに保存。

### auto_post_margiela
- 指定されたディレクトリに保存されたテキストファイルを読み込み、Twitter APIを用いて自動的にツイートします。ツイート後、ファイルは削除。

### save_last_executed_item_id
- 前回実行したアイテムIDを保存する関数です。次回の実行時に、前回のIDを参照して処理を進めます。

# ファイル構成
```
project_root/
├── data/
│   └── input/
│       └── brand_item_model.csv
├── src/
│   └── config.py
├── log.txt
└── main.py
```
# ログ
- 処理の途中で発生したエラーや、ツイート成功/失敗のログは log.txt に記録される。
